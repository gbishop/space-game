!function(I){var g={};function C(n){if(g[n])return g[n].exports;var e=g[n]={i:n,l:!1,exports:{}};return I[n].call(e.exports,e,e.exports,C),e.l=!0,e.exports}C.m=I,C.c=g,C.d=function(I,g,n){C.o(I,g)||Object.defineProperty(I,g,{enumerable:!0,get:n})},C.r=function(I){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(I,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(I,"__esModule",{value:!0})},C.t=function(I,g){if(1&g&&(I=C(I)),8&g)return I;if(4&g&&"object"==typeof I&&I&&I.__esModule)return I;var n=Object.create(null);if(C.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:I}),2&g&&"string"!=typeof I)for(var e in I)C.d(n,e,function(g){return I[g]}.bind(null,e));return n},C.n=function(I){var g=I&&I.__esModule?function(){return I.default}:function(){return I};return C.d(g,"a",g),g},C.o=function(I,g){return Object.prototype.hasOwnProperty.call(I,g)},C.p="",C(C.s=3)}([function(module,__webpack_exports__,__webpack_require__){"use strict";eval("const key = 'space-config';\nconst version = 1;\nclass Settings {\n    constructor() {\n        this.mode = 'auto';\n    }\n    persist() {\n        const data = { mode: this.mode, version: version };\n        const json = JSON.stringify(data);\n        localStorage.setItem(key, json);\n    }\n    restore() {\n        const json = localStorage.getItem(key);\n        if (json) {\n            const data = JSON.parse(json);\n            if (data.version == version) {\n                this.mode = data.mode;\n            }\n        }\n    }\n}\nconst settings = new Settings();\nsettings.restore();\n/* harmony default export */ __webpack_exports__[\"a\"] = (settings);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2V0dGluZ3MudHM/YzIzYyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDZSxpRUFBUSxFQUFDIiwiZmlsZSI6IjAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBrZXkgPSAnc3BhY2UtY29uZmlnJztcbmNvbnN0IHZlcnNpb24gPSAxO1xuY2xhc3MgU2V0dGluZ3Mge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLm1vZGUgPSAnYXV0byc7XG4gICAgfVxuICAgIHBlcnNpc3QoKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSB7IG1vZGU6IHRoaXMubW9kZSwgdmVyc2lvbjogdmVyc2lvbiB9O1xuICAgICAgICBjb25zdCBqc29uID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwganNvbik7XG4gICAgfVxuICAgIHJlc3RvcmUoKSB7XG4gICAgICAgIGNvbnN0IGpzb24gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xuICAgICAgICBpZiAoanNvbikge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoanNvbik7XG4gICAgICAgICAgICBpZiAoZGF0YS52ZXJzaW9uID09IHZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGUgPSBkYXRhLm1vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5jb25zdCBzZXR0aW5ncyA9IG5ldyBTZXR0aW5ncygpO1xuc2V0dGluZ3MucmVzdG9yZSgpO1xuZXhwb3J0IGRlZmF1bHQgc2V0dGluZ3M7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n")},function(module,exports){eval("module.exports = Phaser;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJQaGFzZXJcIj9lYmM2Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IFBoYXNlcjsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///1\n")},,function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: external "Phaser"\nvar external_Phaser_ = __webpack_require__(1);\n\n// EXTERNAL MODULE: ./src/settings.ts\nvar settings = __webpack_require__(0);\n\n// CONCATENATED MODULE: ./src/base.ts\n\n\nclass SwitchBase extends Phaser.Scene {\n    constructor(args) {\n        super(args);\n        this.initialized = false;\n    }\n    getUserInput(choices, correct, func) {\n        if (!this.initialized) {\n            this.events.on("resume", (s, d) => this.userInput(d.choice));\n            /* There is a bug in run, now fixed but not yet released that makes\n             * it recreate instead of restarting a paused scene. I\'ll work around\n             * that by always resuming but I\'ll first need to run to get it started.\n             * I\'ll remove this when run gets released */\n            this.scene.run("ControlScene");\n            this.scene.pause("ControlScene");\n            this.initialized = true;\n        }\n        let inputConfig = { caller: this.scene.key, choices, correct };\n        this.scene.resume("ControlScene", inputConfig);\n        this.scene.pause();\n        this.callback = func;\n    }\n    userInput(choice) {\n        // this method will be called with the user\'s response\n        this.callback(choice);\n    }\n}\nclass base_ControlScene extends Phaser.Scene {\n    constructor() {\n        super({\n            key: "ControlScene"\n        });\n    }\n    returnInput(value) {\n        if (settings["a" /* default */].mode == "one") {\n            value = this.inputConfig.correct;\n        }\n        this.scene.resume(this.inputConfig.caller, { choice: value });\n        this.scene.pause();\n    }\n    setSelected(choice) {\n        const choices = document.querySelectorAll("button.choice");\n        let selected = document.querySelector("button.selected");\n        if (selected) {\n            selected.classList.remove("selected");\n        }\n        choices[choice].classList.add("selected");\n    }\n    create() {\n        console.log("create control");\n        this.input.keyboard.on("keydown-LEFT", (e) => {\n            // pass response back to caller\n            this.returnInput(0);\n        });\n        this.input.keyboard.on("keydown-RIGHT", (e) => {\n            // pass response back to caller\n            this.returnInput(1);\n        });\n        this.events.on("resume", (e, d) => {\n            this.inputConfig = d;\n            this.scene.pause(d.caller);\n            if (settings["a" /* default */].mode == "auto") {\n                this.time.delayedCall(1000, () => {\n                    this.setSelected(this.inputConfig.correct);\n                    this.returnInput(this.inputConfig.correct);\n                }, [], this);\n            }\n        });\n        document\n            .getElementById("left")\n            .addEventListener("click", e => this.returnInput(0));\n        document\n            .getElementById("right")\n            .addEventListener("click", e => this.returnInput(1));\n        this.input.keyboard.on("keydown-SPACE", (e) => {\n            const choices = document.querySelectorAll("button.choice");\n            let selected = document.querySelector("button.selected");\n            let i = 0;\n            if (selected) {\n                i = ([...choices].indexOf(selected) + 1) % choices.length;\n                selected.classList.remove("selected");\n            }\n            choices[i].classList.add("selected");\n        });\n        this.input.keyboard.on("keydown-ENTER", (e) => {\n            const selected = (document.querySelector("button.selected"));\n            if (selected) {\n                selected.click();\n            }\n        });\n    }\n}\n\n// CONCATENATED MODULE: ./src/game.ts\n\n\nclass game_GameScene extends SwitchBase {\n    constructor() {\n        super({\n            key: "GameScene"\n        });\n        this.elapsed = 0;\n        this.previous = 0; // previous elapsed\n        this.period = 2; // time per cycle\n        this.canvas = document.querySelector("canvas");\n        this.lane = 0;\n        this.rocket_lane = 1;\n        this.rocket_y = 0;\n        this.sign = 1;\n        this.freq = 1.5;\n        this.score = 0;\n    }\n    preload() {\n        this.load.image("alien", "assets/alien.png");\n        this.load.image("rocket", "assets/rocket.png");\n        this.load.image("particle", "assets/particle.png");\n        this.load.audio("pop", "assets/pop.wav");\n        this.load.audio("alienSound", "assets/alien.mp3");\n    }\n    create() {\n        console.log("create game");\n        this.scoreDisplay = this.add.text(20, 20, "0");\n        this.rocket_y = this.canvas.height * 0.9;\n        this.alien = this.add.sprite(this.canvas.width / 2, 10, "alien");\n        this.rocket = this.add.sprite((3 * this.canvas.width) / 4, this.rocket_y, "rocket");\n        // Enable physics on rocket and alien sprites\n        this.physics.world.enable([this.rocket, this.alien]);\n        this.collider = this.physics.add.overlap(this.rocket, this.alien, this.rocketCollideWithAlien, null, this);\n        this.particles = this.add.particles("particle");\n        this.emitter = this.particles.createEmitter({\n            angle: { min: 0, max: 360 },\n            speed: { min: 50, max: 200 },\n            quantity: { min: 40, max: 50 },\n            lifespan: { min: 200, max: 500 },\n            alpha: { start: 1, end: 0 },\n            scale: { min: 0.5, max: 0.5 },\n            rotate: { start: 0, end: 360 },\n            gravityY: 800,\n            on: false\n        });\n        this.reset();\n        this.popSound = this.sound.add("pop");\n        this.alienSound = this.sound.add("alienSound");\n        this.alienSound.setLoop(true);\n        this.alienSound.play();\n    }\n    reset() {\n        const w = this.canvas.width;\n        this.elapsed = 0;\n        this.lane = Phaser.Math.Between(0, 1);\n        this.sign = 2 * Phaser.Math.Between(0, 1) - 1;\n        this.freq = 0.5 + Math.random() * 2;\n        this.rocket.x = w / 4 + (w / 2) * this.rocket_lane;\n        this.alien.setVisible(true);\n        this.collider.active = true;\n        if (this.alienSound) {\n            this.alienSound.setSeek(0);\n            this.alienSound.setRate(this.freq);\n            this.alienSound.play();\n        }\n    }\n    update(time, delta) {\n        const w = this.canvas.width;\n        const h = this.canvas.height;\n        this.previous = this.elapsed;\n        this.elapsed += delta * 0.001;\n        // update when the period is exceeded\n        if (this.elapsed > this.period) {\n            this.reset();\n        }\n        // pause when we pass the decision time\n        const decision_time = this.period * 0.5;\n        if (this.previous < decision_time && this.elapsed >= decision_time) {\n            this.getUserInput(["left", "right"], this.lane, (v) => (this.rocket_lane = v));\n        }\n        const u = this.elapsed / this.period;\n        const goal_x = w / 4 + (this.lane * w) / 2;\n        const wiggle = w / 2 +\n            ((Math.min(10, this.score) * w) / 20) *\n                (this.sign * Math.sin(2 * Math.PI * this.freq * u));\n        const v = Math.min(1, (h / this.rocket_y) * u);\n        this.alien.x = (1 - v) * wiggle + v * goal_x;\n        this.alien.y = this.canvas.height * u;\n        const rocket_x = w / 4 + (this.rocket_lane * w) / 2;\n        this.rocket.x -= (this.rocket.x - rocket_x) / 10;\n        this.alienSound.setVolume(u);\n        if (u % 0.2 < 1 / 60) {\n            this.alien.setTint(0xffffff * Math.random());\n        }\n    }\n    rocketCollideWithAlien() {\n        // this.sound.play("pop");\n        this.popSound.play();\n        // flash\n        this.cameras.main.flash();\n        // Hide the alien\n        this.alien.visible = false;\n        // prevent multiple collisions\n        this.collider.active = false;\n        // blowup\n        this.particles.emitParticleAt(this.alien.x, this.alien.y);\n        // update score\n        this.score += 1;\n        this.scoreDisplay.setText("" + this.score);\n    }\n}\n\n// CONCATENATED MODULE: ./src/app.ts\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MyGame", function() { return MyGame; });\n\n\n\nconst config = {\n    title: "Runner",\n    type: Phaser.AUTO,\n    width: 600,\n    height: 800,\n    /*\n    scale: {\n      mode: Phaser.Scale.FIT,\n      autoCenter: Phaser.Scale.CENTER_BOTH\n    }, */\n    parent: "play",\n    scene: [game_GameScene, base_ControlScene],\n    physics: {\n        default: "arcade",\n        arcade: {\n            debug: false\n        }\n    },\n    backgroundColor: "#444444"\n};\nclass MyGame extends Phaser.Game {\n    constructor(config) {\n        super(config);\n    }\n}\nwindow.onload = () => {\n    document\n        .getElementById("setup")\n        .addEventListener("click", () => (location.pathname = "settings.html"));\n    var game = new MyGame(config);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYmFzZS50cz9hZTgzIiwid2VicGFjazovLy8uL3NyYy9nYW1lLnRzP2FhZmMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC50cz9mMWIyIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFnQjtBQUNrQjtBQUMzQjtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyxNQUFNLGlCQUFZO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsWUFBWSwyQkFBUTtBQUNwQjtBQUNBO0FBQ0Esb0RBQW9ELGdCQUFnQjtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwyQkFBUTtBQUN4QjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7O0FDNUZnQjtBQUNvQjtBQUM3QixNQUFNLGNBQVMsU0FBUyxVQUFVO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLDBCQUEwQjtBQUMxQix3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixtQkFBbUI7QUFDdkMsb0JBQW9CLG9CQUFvQjtBQUN4Qyx1QkFBdUIsbUJBQW1CO0FBQzFDLHVCQUF1QixxQkFBcUI7QUFDNUMsb0JBQW9CLG1CQUFtQjtBQUN2QyxvQkFBb0IscUJBQXFCO0FBQ3pDLHFCQUFxQixxQkFBcUI7QUFDMUM7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQy9HQTtBQUFnQjtBQUNzQjtBQUNIO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLFlBQVksY0FBUyxFQUFFLGlCQUFZO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiMy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBcInBoYXNlclwiO1xuaW1wb3J0IHNldHRpbmdzIGZyb20gXCIuL3NldHRpbmdzXCI7XG5leHBvcnQgY2xhc3MgU3dpdGNoQmFzZSBleHRlbmRzIFBoYXNlci5TY2VuZSB7XG4gICAgY29uc3RydWN0b3IoYXJncykge1xuICAgICAgICBzdXBlcihhcmdzKTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplZCA9IGZhbHNlO1xuICAgIH1cbiAgICBnZXRVc2VySW5wdXQoY2hvaWNlcywgY29ycmVjdCwgZnVuYykge1xuICAgICAgICBpZiAoIXRoaXMuaW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLm9uKFwicmVzdW1lXCIsIChzLCBkKSA9PiB0aGlzLnVzZXJJbnB1dChkLmNob2ljZSkpO1xuICAgICAgICAgICAgLyogVGhlcmUgaXMgYSBidWcgaW4gcnVuLCBub3cgZml4ZWQgYnV0IG5vdCB5ZXQgcmVsZWFzZWQgdGhhdCBtYWtlc1xuICAgICAgICAgICAgICogaXQgcmVjcmVhdGUgaW5zdGVhZCBvZiByZXN0YXJ0aW5nIGEgcGF1c2VkIHNjZW5lLiBJJ2xsIHdvcmsgYXJvdW5kXG4gICAgICAgICAgICAgKiB0aGF0IGJ5IGFsd2F5cyByZXN1bWluZyBidXQgSSdsbCBmaXJzdCBuZWVkIHRvIHJ1biB0byBnZXQgaXQgc3RhcnRlZC5cbiAgICAgICAgICAgICAqIEknbGwgcmVtb3ZlIHRoaXMgd2hlbiBydW4gZ2V0cyByZWxlYXNlZCAqL1xuICAgICAgICAgICAgdGhpcy5zY2VuZS5ydW4oXCJDb250cm9sU2NlbmVcIik7XG4gICAgICAgICAgICB0aGlzLnNjZW5lLnBhdXNlKFwiQ29udHJvbFNjZW5lXCIpO1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGlucHV0Q29uZmlnID0geyBjYWxsZXI6IHRoaXMuc2NlbmUua2V5LCBjaG9pY2VzLCBjb3JyZWN0IH07XG4gICAgICAgIHRoaXMuc2NlbmUucmVzdW1lKFwiQ29udHJvbFNjZW5lXCIsIGlucHV0Q29uZmlnKTtcbiAgICAgICAgdGhpcy5zY2VuZS5wYXVzZSgpO1xuICAgICAgICB0aGlzLmNhbGxiYWNrID0gZnVuYztcbiAgICB9XG4gICAgdXNlcklucHV0KGNob2ljZSkge1xuICAgICAgICAvLyB0aGlzIG1ldGhvZCB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZSB1c2VyJ3MgcmVzcG9uc2VcbiAgICAgICAgdGhpcy5jYWxsYmFjayhjaG9pY2UpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBDb250cm9sU2NlbmUgZXh0ZW5kcyBQaGFzZXIuU2NlbmUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcih7XG4gICAgICAgICAgICBrZXk6IFwiQ29udHJvbFNjZW5lXCJcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybklucHV0KHZhbHVlKSB7XG4gICAgICAgIGlmIChzZXR0aW5ncy5tb2RlID09IFwib25lXCIpIHtcbiAgICAgICAgICAgIHZhbHVlID0gdGhpcy5pbnB1dENvbmZpZy5jb3JyZWN0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2NlbmUucmVzdW1lKHRoaXMuaW5wdXRDb25maWcuY2FsbGVyLCB7IGNob2ljZTogdmFsdWUgfSk7XG4gICAgICAgIHRoaXMuc2NlbmUucGF1c2UoKTtcbiAgICB9XG4gICAgc2V0U2VsZWN0ZWQoY2hvaWNlKSB7XG4gICAgICAgIGNvbnN0IGNob2ljZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiYnV0dG9uLmNob2ljZVwiKTtcbiAgICAgICAgbGV0IHNlbGVjdGVkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImJ1dHRvbi5zZWxlY3RlZFwiKTtcbiAgICAgICAgaWYgKHNlbGVjdGVkKSB7XG4gICAgICAgICAgICBzZWxlY3RlZC5jbGFzc0xpc3QucmVtb3ZlKFwic2VsZWN0ZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgY2hvaWNlc1tjaG9pY2VdLmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKTtcbiAgICB9XG4gICAgY3JlYXRlKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcImNyZWF0ZSBjb250cm9sXCIpO1xuICAgICAgICB0aGlzLmlucHV0LmtleWJvYXJkLm9uKFwia2V5ZG93bi1MRUZUXCIsIChlKSA9PiB7XG4gICAgICAgICAgICAvLyBwYXNzIHJlc3BvbnNlIGJhY2sgdG8gY2FsbGVyXG4gICAgICAgICAgICB0aGlzLnJldHVybklucHV0KDApO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pbnB1dC5rZXlib2FyZC5vbihcImtleWRvd24tUklHSFRcIiwgKGUpID0+IHtcbiAgICAgICAgICAgIC8vIHBhc3MgcmVzcG9uc2UgYmFjayB0byBjYWxsZXJcbiAgICAgICAgICAgIHRoaXMucmV0dXJuSW5wdXQoMSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmV2ZW50cy5vbihcInJlc3VtZVwiLCAoZSwgZCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5pbnB1dENvbmZpZyA9IGQ7XG4gICAgICAgICAgICB0aGlzLnNjZW5lLnBhdXNlKGQuY2FsbGVyKTtcbiAgICAgICAgICAgIGlmIChzZXR0aW5ncy5tb2RlID09IFwiYXV0b1wiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50aW1lLmRlbGF5ZWRDYWxsKDEwMDAsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3RlZCh0aGlzLmlucHV0Q29uZmlnLmNvcnJlY3QpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJldHVybklucHV0KHRoaXMuaW5wdXRDb25maWcuY29ycmVjdCk7XG4gICAgICAgICAgICAgICAgfSwgW10sIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgICAgIC5nZXRFbGVtZW50QnlJZChcImxlZnRcIilcbiAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiB0aGlzLnJldHVybklucHV0KDApKTtcbiAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgICAgIC5nZXRFbGVtZW50QnlJZChcInJpZ2h0XCIpXG4gICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT4gdGhpcy5yZXR1cm5JbnB1dCgxKSk7XG4gICAgICAgIHRoaXMuaW5wdXQua2V5Ym9hcmQub24oXCJrZXlkb3duLVNQQUNFXCIsIChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjaG9pY2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcImJ1dHRvbi5jaG9pY2VcIik7XG4gICAgICAgICAgICBsZXQgc2VsZWN0ZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYnV0dG9uLnNlbGVjdGVkXCIpO1xuICAgICAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICAgICAgaWYgKHNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgaSA9IChbLi4uY2hvaWNlc10uaW5kZXhPZihzZWxlY3RlZCkgKyAxKSAlIGNob2ljZXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkLmNsYXNzTGlzdC5yZW1vdmUoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNob2ljZXNbaV0uY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pbnB1dC5rZXlib2FyZC5vbihcImtleWRvd24tRU5URVJcIiwgKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkID0gKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJidXR0b24uc2VsZWN0ZWRcIikpO1xuICAgICAgICAgICAgaWYgKHNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQuY2xpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IFwicGhhc2VyXCI7XG5pbXBvcnQgeyBTd2l0Y2hCYXNlIH0gZnJvbSBcIi4vYmFzZVwiO1xuZXhwb3J0IGNsYXNzIEdhbWVTY2VuZSBleHRlbmRzIFN3aXRjaEJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcih7XG4gICAgICAgICAgICBrZXk6IFwiR2FtZVNjZW5lXCJcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZWxhcHNlZCA9IDA7XG4gICAgICAgIHRoaXMucHJldmlvdXMgPSAwOyAvLyBwcmV2aW91cyBlbGFwc2VkXG4gICAgICAgIHRoaXMucGVyaW9kID0gMjsgLy8gdGltZSBwZXIgY3ljbGVcbiAgICAgICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiY2FudmFzXCIpO1xuICAgICAgICB0aGlzLmxhbmUgPSAwO1xuICAgICAgICB0aGlzLnJvY2tldF9sYW5lID0gMTtcbiAgICAgICAgdGhpcy5yb2NrZXRfeSA9IDA7XG4gICAgICAgIHRoaXMuc2lnbiA9IDE7XG4gICAgICAgIHRoaXMuZnJlcSA9IDEuNTtcbiAgICAgICAgdGhpcy5zY29yZSA9IDA7XG4gICAgfVxuICAgIHByZWxvYWQoKSB7XG4gICAgICAgIHRoaXMubG9hZC5pbWFnZShcImFsaWVuXCIsIFwiYXNzZXRzL2FsaWVuLnBuZ1wiKTtcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKFwicm9ja2V0XCIsIFwiYXNzZXRzL3JvY2tldC5wbmdcIik7XG4gICAgICAgIHRoaXMubG9hZC5pbWFnZShcInBhcnRpY2xlXCIsIFwiYXNzZXRzL3BhcnRpY2xlLnBuZ1wiKTtcbiAgICAgICAgdGhpcy5sb2FkLmF1ZGlvKFwicG9wXCIsIFwiYXNzZXRzL3BvcC53YXZcIik7XG4gICAgICAgIHRoaXMubG9hZC5hdWRpbyhcImFsaWVuU291bmRcIiwgXCJhc3NldHMvYWxpZW4ubXAzXCIpO1xuICAgIH1cbiAgICBjcmVhdGUoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY3JlYXRlIGdhbWVcIik7XG4gICAgICAgIHRoaXMuc2NvcmVEaXNwbGF5ID0gdGhpcy5hZGQudGV4dCgyMCwgMjAsIFwiMFwiKTtcbiAgICAgICAgdGhpcy5yb2NrZXRfeSA9IHRoaXMuY2FudmFzLmhlaWdodCAqIDAuOTtcbiAgICAgICAgdGhpcy5hbGllbiA9IHRoaXMuYWRkLnNwcml0ZSh0aGlzLmNhbnZhcy53aWR0aCAvIDIsIDEwLCBcImFsaWVuXCIpO1xuICAgICAgICB0aGlzLnJvY2tldCA9IHRoaXMuYWRkLnNwcml0ZSgoMyAqIHRoaXMuY2FudmFzLndpZHRoKSAvIDQsIHRoaXMucm9ja2V0X3ksIFwicm9ja2V0XCIpO1xuICAgICAgICAvLyBFbmFibGUgcGh5c2ljcyBvbiByb2NrZXQgYW5kIGFsaWVuIHNwcml0ZXNcbiAgICAgICAgdGhpcy5waHlzaWNzLndvcmxkLmVuYWJsZShbdGhpcy5yb2NrZXQsIHRoaXMuYWxpZW5dKTtcbiAgICAgICAgdGhpcy5jb2xsaWRlciA9IHRoaXMucGh5c2ljcy5hZGQub3ZlcmxhcCh0aGlzLnJvY2tldCwgdGhpcy5hbGllbiwgdGhpcy5yb2NrZXRDb2xsaWRlV2l0aEFsaWVuLCBudWxsLCB0aGlzKTtcbiAgICAgICAgdGhpcy5wYXJ0aWNsZXMgPSB0aGlzLmFkZC5wYXJ0aWNsZXMoXCJwYXJ0aWNsZVwiKTtcbiAgICAgICAgdGhpcy5lbWl0dGVyID0gdGhpcy5wYXJ0aWNsZXMuY3JlYXRlRW1pdHRlcih7XG4gICAgICAgICAgICBhbmdsZTogeyBtaW46IDAsIG1heDogMzYwIH0sXG4gICAgICAgICAgICBzcGVlZDogeyBtaW46IDUwLCBtYXg6IDIwMCB9LFxuICAgICAgICAgICAgcXVhbnRpdHk6IHsgbWluOiA0MCwgbWF4OiA1MCB9LFxuICAgICAgICAgICAgbGlmZXNwYW46IHsgbWluOiAyMDAsIG1heDogNTAwIH0sXG4gICAgICAgICAgICBhbHBoYTogeyBzdGFydDogMSwgZW5kOiAwIH0sXG4gICAgICAgICAgICBzY2FsZTogeyBtaW46IDAuNSwgbWF4OiAwLjUgfSxcbiAgICAgICAgICAgIHJvdGF0ZTogeyBzdGFydDogMCwgZW5kOiAzNjAgfSxcbiAgICAgICAgICAgIGdyYXZpdHlZOiA4MDAsXG4gICAgICAgICAgICBvbjogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgdGhpcy5wb3BTb3VuZCA9IHRoaXMuc291bmQuYWRkKFwicG9wXCIpO1xuICAgICAgICB0aGlzLmFsaWVuU291bmQgPSB0aGlzLnNvdW5kLmFkZChcImFsaWVuU291bmRcIik7XG4gICAgICAgIHRoaXMuYWxpZW5Tb3VuZC5zZXRMb29wKHRydWUpO1xuICAgICAgICB0aGlzLmFsaWVuU291bmQucGxheSgpO1xuICAgIH1cbiAgICByZXNldCgpIHtcbiAgICAgICAgY29uc3QgdyA9IHRoaXMuY2FudmFzLndpZHRoO1xuICAgICAgICB0aGlzLmVsYXBzZWQgPSAwO1xuICAgICAgICB0aGlzLmxhbmUgPSBQaGFzZXIuTWF0aC5CZXR3ZWVuKDAsIDEpO1xuICAgICAgICB0aGlzLnNpZ24gPSAyICogUGhhc2VyLk1hdGguQmV0d2VlbigwLCAxKSAtIDE7XG4gICAgICAgIHRoaXMuZnJlcSA9IDAuNSArIE1hdGgucmFuZG9tKCkgKiAyO1xuICAgICAgICB0aGlzLnJvY2tldC54ID0gdyAvIDQgKyAodyAvIDIpICogdGhpcy5yb2NrZXRfbGFuZTtcbiAgICAgICAgdGhpcy5hbGllbi5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICB0aGlzLmNvbGxpZGVyLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLmFsaWVuU291bmQpIHtcbiAgICAgICAgICAgIHRoaXMuYWxpZW5Tb3VuZC5zZXRTZWVrKDApO1xuICAgICAgICAgICAgdGhpcy5hbGllblNvdW5kLnNldFJhdGUodGhpcy5mcmVxKTtcbiAgICAgICAgICAgIHRoaXMuYWxpZW5Tb3VuZC5wbGF5KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlKHRpbWUsIGRlbHRhKSB7XG4gICAgICAgIGNvbnN0IHcgPSB0aGlzLmNhbnZhcy53aWR0aDtcbiAgICAgICAgY29uc3QgaCA9IHRoaXMuY2FudmFzLmhlaWdodDtcbiAgICAgICAgdGhpcy5wcmV2aW91cyA9IHRoaXMuZWxhcHNlZDtcbiAgICAgICAgdGhpcy5lbGFwc2VkICs9IGRlbHRhICogMC4wMDE7XG4gICAgICAgIC8vIHVwZGF0ZSB3aGVuIHRoZSBwZXJpb2QgaXMgZXhjZWVkZWRcbiAgICAgICAgaWYgKHRoaXMuZWxhcHNlZCA+IHRoaXMucGVyaW9kKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcGF1c2Ugd2hlbiB3ZSBwYXNzIHRoZSBkZWNpc2lvbiB0aW1lXG4gICAgICAgIGNvbnN0IGRlY2lzaW9uX3RpbWUgPSB0aGlzLnBlcmlvZCAqIDAuNTtcbiAgICAgICAgaWYgKHRoaXMucHJldmlvdXMgPCBkZWNpc2lvbl90aW1lICYmIHRoaXMuZWxhcHNlZCA+PSBkZWNpc2lvbl90aW1lKSB7XG4gICAgICAgICAgICB0aGlzLmdldFVzZXJJbnB1dChbXCJsZWZ0XCIsIFwicmlnaHRcIl0sIHRoaXMubGFuZSwgKHYpID0+ICh0aGlzLnJvY2tldF9sYW5lID0gdikpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHUgPSB0aGlzLmVsYXBzZWQgLyB0aGlzLnBlcmlvZDtcbiAgICAgICAgY29uc3QgZ29hbF94ID0gdyAvIDQgKyAodGhpcy5sYW5lICogdykgLyAyO1xuICAgICAgICBjb25zdCB3aWdnbGUgPSB3IC8gMiArXG4gICAgICAgICAgICAoKE1hdGgubWluKDEwLCB0aGlzLnNjb3JlKSAqIHcpIC8gMjApICpcbiAgICAgICAgICAgICAgICAodGhpcy5zaWduICogTWF0aC5zaW4oMiAqIE1hdGguUEkgKiB0aGlzLmZyZXEgKiB1KSk7XG4gICAgICAgIGNvbnN0IHYgPSBNYXRoLm1pbigxLCAoaCAvIHRoaXMucm9ja2V0X3kpICogdSk7XG4gICAgICAgIHRoaXMuYWxpZW4ueCA9ICgxIC0gdikgKiB3aWdnbGUgKyB2ICogZ29hbF94O1xuICAgICAgICB0aGlzLmFsaWVuLnkgPSB0aGlzLmNhbnZhcy5oZWlnaHQgKiB1O1xuICAgICAgICBjb25zdCByb2NrZXRfeCA9IHcgLyA0ICsgKHRoaXMucm9ja2V0X2xhbmUgKiB3KSAvIDI7XG4gICAgICAgIHRoaXMucm9ja2V0LnggLT0gKHRoaXMucm9ja2V0LnggLSByb2NrZXRfeCkgLyAxMDtcbiAgICAgICAgdGhpcy5hbGllblNvdW5kLnNldFZvbHVtZSh1KTtcbiAgICAgICAgaWYgKHUgJSAwLjIgPCAxIC8gNjApIHtcbiAgICAgICAgICAgIHRoaXMuYWxpZW4uc2V0VGludCgweGZmZmZmZiAqIE1hdGgucmFuZG9tKCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJvY2tldENvbGxpZGVXaXRoQWxpZW4oKSB7XG4gICAgICAgIC8vIHRoaXMuc291bmQucGxheShcInBvcFwiKTtcbiAgICAgICAgdGhpcy5wb3BTb3VuZC5wbGF5KCk7XG4gICAgICAgIC8vIGZsYXNoXG4gICAgICAgIHRoaXMuY2FtZXJhcy5tYWluLmZsYXNoKCk7XG4gICAgICAgIC8vIEhpZGUgdGhlIGFsaWVuXG4gICAgICAgIHRoaXMuYWxpZW4udmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAvLyBwcmV2ZW50IG11bHRpcGxlIGNvbGxpc2lvbnNcbiAgICAgICAgdGhpcy5jb2xsaWRlci5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgLy8gYmxvd3VwXG4gICAgICAgIHRoaXMucGFydGljbGVzLmVtaXRQYXJ0aWNsZUF0KHRoaXMuYWxpZW4ueCwgdGhpcy5hbGllbi55KTtcbiAgICAgICAgLy8gdXBkYXRlIHNjb3JlXG4gICAgICAgIHRoaXMuc2NvcmUgKz0gMTtcbiAgICAgICAgdGhpcy5zY29yZURpc3BsYXkuc2V0VGV4dChcIlwiICsgdGhpcy5zY29yZSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IFwicGhhc2VyXCI7XG5pbXBvcnQgeyBDb250cm9sU2NlbmUgfSBmcm9tIFwiLi9iYXNlXCI7XG5pbXBvcnQgeyBHYW1lU2NlbmUgfSBmcm9tIFwiLi9nYW1lXCI7XG5jb25zdCBjb25maWcgPSB7XG4gICAgdGl0bGU6IFwiUnVubmVyXCIsXG4gICAgdHlwZTogUGhhc2VyLkFVVE8sXG4gICAgd2lkdGg6IDYwMCxcbiAgICBoZWlnaHQ6IDgwMCxcbiAgICAvKlxuICAgIHNjYWxlOiB7XG4gICAgICBtb2RlOiBQaGFzZXIuU2NhbGUuRklULFxuICAgICAgYXV0b0NlbnRlcjogUGhhc2VyLlNjYWxlLkNFTlRFUl9CT1RIXG4gICAgfSwgKi9cbiAgICBwYXJlbnQ6IFwicGxheVwiLFxuICAgIHNjZW5lOiBbR2FtZVNjZW5lLCBDb250cm9sU2NlbmVdLFxuICAgIHBoeXNpY3M6IHtcbiAgICAgICAgZGVmYXVsdDogXCJhcmNhZGVcIixcbiAgICAgICAgYXJjYWRlOiB7XG4gICAgICAgICAgICBkZWJ1ZzogZmFsc2VcbiAgICAgICAgfVxuICAgIH0sXG4gICAgYmFja2dyb3VuZENvbG9yOiBcIiM0NDQ0NDRcIlxufTtcbmV4cG9ydCBjbGFzcyBNeUdhbWUgZXh0ZW5kcyBQaGFzZXIuR2FtZSB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgICAgIHN1cGVyKGNvbmZpZyk7XG4gICAgfVxufVxud2luZG93Lm9ubG9hZCA9ICgpID0+IHtcbiAgICBkb2N1bWVudFxuICAgICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJzZXR1cFwiKVxuICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IChsb2NhdGlvbi5wYXRobmFtZSA9IFwic2V0dGluZ3MuaHRtbFwiKSk7XG4gICAgdmFyIGdhbWUgPSBuZXcgTXlHYW1lKGNvbmZpZyk7XG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///3\n')}]);